{% extends "base.html.j2" %}

{% block css %}
    <link rel="stylesheet" href="{{url_for('static', filename='css/battle.css')}}">
{% endblock %}

{% block title %}
Battle
{% endblock %}

{% block content %}

<h1> Pok&eacute;mon Battleground</h1>
<a class="btn" href="{{url_for('main.launch_attack', id=opponent.id)}}">Continue Battle&nbsp;<i class="bi bi-bullseye"></i></a>
<div class="row mt-5">
    <div class="col-md-3">
        <table id="user_squad">
            <thead>
                <tr>
                    <th colspan="3">Your Squad</th>
                </tr>
            </thead>
            {% for poke in user_poke %}
            <tbody>
                <tr>
                    <th>{{poke["name"].title()}}</th>
                </tr>
                <tr>
                    <td rowspan="3"><img src="{{poke['sprite']}}" class="img-fluid d-block mx-auto" alt="Picture of {{poke['name']}}."></td>
                    <td>HP:</td>
                    <td>{{poke["hp"]}}</td>
                </tr>
                <tr>
                    <td>Attack:</td>
                    <td>{{poke["attack"]}}</td>
                </tr>
                <tr>
                    <td>Defense:</td>
                    <td>{{poke["defense"]}}</td>
                </tr>
            </tbody>
            {% endfor %}
        </table>
    </div>
    <div id="results" class="col-md-6">
        <h2>The battle continues...</h2>
        <p>{{results[-1]}}<p>
        <h3>Last round's action:</h3>
        <ol>
            {% for result in results[:-1] %}
                    <li>{{result}}</li>
            {% endfor %}
        </ol>
    </div>
    <div class="col-md-3">
        <table id="opp_squad">
            <thead>
                <tr>
                    <th colspan="3">Opponent's Squad</th>
                </tr>
            </thead>
            {% for poke in opp_poke %}
            <tbody>
                <tr>
                    <th>{{poke["name"].title()}}</th>
                </tr>
                <tr>
                    <td rowspan="3"><img src="{{poke['sprite']}}" class="img-fluid d-block mx-auto" alt="Picture of {{poke['name']}}."></td>
                    <td>HP:</td>
                    <td>{{poke["hp"]}}</td>
                </tr>
                <tr>
                    <td>Attack:</td>
                    <td>{{poke["attack"]}}</td>
                </tr>
                <tr>
                    <td>Defense:</td>
                    <td>{{poke["defense"]}}</td>
                </tr>
            </tbody>
            {% endfor %}
        </table>
    </div>
</div>

{% endblock %}